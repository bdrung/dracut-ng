From: Benjamin Drung <benjamin.drung@canonical.com>
Date: Tue, 2 Jul 2024 22:26:44 +0200
Subject: Default initrdname to initrd.img-${kernel}

The initrd is named `initrd.img-${kernel}` in Debian and Ubuntu.

Forwarded: not-needed
Signed-off-by: Benjamin Drung <benjamin.drung@canonical.com>
---
 dracut.sh              | 2 +-
 man/dracut.conf.5.adoc | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/dracut.sh b/dracut.sh
index e6adffe..fad5e3a 100755
--- a/dracut.sh
+++ b/dracut.sh
@@ -1213,7 +1213,7 @@ if ! [[ $outfile ]]; then
         outfile="${dracutsysrootdir-}$efidir/Linux/linux-$kernel${MACHINE_ID:+-${MACHINE_ID}}${BUILD_ID:+-${BUILD_ID}}.efi"
     else
         if ! [[ $initrdname ]]; then
-            initrdname="initramfs-${kernel}.img"
+            initrdname="initrd.img-${kernel}"
         fi
         if [[ -d "${dracutsysrootdir-}"/efi/loader/entries || -L "${dracutsysrootdir-}"/efi/loader/entries ]] \
             && [[ $MACHINE_ID ]] \
diff --git a/man/dracut.conf.5.adoc b/man/dracut.conf.5.adoc
index 9290758..47a1e01 100644
--- a/man/dracut.conf.5.adoc
+++ b/man/dracut.conf.5.adoc
@@ -370,7 +370,7 @@ The initrdname configuration option is required to match the
 _initr*$\{kernel\}*_ file pattern and only one file with this pattern should
 exists in the directory where initramfs is loaded from.
 +
-Defaults to _initramfs-$\{kernel\}.img_.
+Defaults to _initrd.img-$\{kernel\}_.
 
 == Files
 _/etc/dracut.conf_::
