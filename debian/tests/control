Tests: lsinitrd
Architecture: !armel !i386
Depends: dracut, linux-image-generic, zstd
Restrictions: needs-root, superficial

# Skip following test cases:
# * TEST-43-KERNEL-INSTALL: kernel-install issue, see https://bugs.debian.org/1117563
# arm64, armhf, ppc64el, and s390x need upstream support: https://github.com/dracutdevs/dracut/issues/2493

Tests: 10-basic,
       13-sysroot,
       20-storage,
       26-enc-raid-lvm,
       40-systemd,
       42-systemd-initrd,
       80-getarg,
       81-skipcpio
Architecture: amd64
Restrictions: allow-stderr, needs-root
Depends: dracut-test

Tests: 11-usr-mount
Architecture: amd64
Restrictions: allow-stderr, needs-root
Depends: btrfs-progs, dracut-test

Tests: 12-uefi
Architecture: amd64
Restrictions: allow-stderr, needs-root
Depends: dracut-test, kbd, squashfs-tools, systemd-boot-efi

Tests: 30-dmsquash
Architecture: amd64
Restrictions: allow-stderr, needs-root
Depends: dracut-live,
         dracut-network,
         dracut-test,
         fdisk,
         squashfs-tools,
         util-linux-extra

Tests: 41-full-systemd
Architecture: amd64
Restrictions: allow-stderr, needs-root
Depends: btrfs-progs,
         dracut-network,
         dracut-test,
         systemd-container,
         systemd-coredump,
         systemd-repart,
         systemd-resolved,
         systemd-timesyncd

Tests: 44-drivers
Architecture: amd64
Restrictions: allow-stderr, needs-root
Depends: dracut-test, xfsprogs

Tests: 50-network
Architecture: amd64
Restrictions: allow-stderr, needs-root
Depends: dracut-network, dracut-test

Tests: 60-nfs
Architecture: amd64
Restrictions: allow-stderr, needs-root
Depends: curl,
         dracut-live,
         dracut-network,
         dracut-test,
         isc-dhcp-server,
         nfs-kernel-server,
         procps

Tests: 70-iscsi, 71-iscsi-multi
Architecture: amd64
Restrictions: allow-stderr, needs-root
Depends: dracut-network, dracut-test, isc-dhcp-server, open-iscsi, procps, tgt

Tests: 72-nbd
Architecture: amd64
Restrictions: allow-stderr, needs-root
Depends: dracut-network,
         dracut-test,
         isc-dhcp-server,
         nbd-client,
         nbd-server,
         procps
