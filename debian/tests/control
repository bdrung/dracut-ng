# Skip following test cases:
# * TEST-14-IMSM: dmraid was removed from Debian
# * TEST-30-ISCSI: iscsiuio.socket missing, see https://bugs.debian.org/1056733
# * TEST-35-ISCSI-MULTI: iscsiuio.socket missing, see https://bugs.debian.org/1056733
# * TEST-50-MULTINIC: disabled in upstream CI since 2023-01-02
# * TEST-60-BONDBRIDGEVLAN: https://github.com/dracutdevs/dracut/issues/2328
# arm64, armhf, ppc64el, and s390x need upstream support: https://github.com/dracutdevs/dracut/issues/2493
Architecture: amd64
Test-Command: debian/tests/run-upstream-tests SKIP="14 16 20 30 35 40 50 60"
Depends: btrfs-progs,
         busybox,
         cryptsetup,
         dracut-core,
         dracut-test,
         fdisk,
         kbd,
         linux-image-generic,
         lvm2,
         make,
         mdadm,
         mount,
         ovmf,
         qemu-efi-aarch64 [arm64],
         qemu-efi-arm [armhf],
         qemu-kvm,
         seabios [ppc64el],
         squashfs-tools,
         systemd-boot-efi [amd64 arm64 armhf riscv64],
         systemd-coredump,
         systemd-cryptsetup,
         systemd-repart,
         systemd-sysv,
         systemd-ukify,
         util-linux,
         zstd
Restrictions: allow-stderr
Features: test-name=upstream-dracut-core

Architecture: amd64
Test-Command: debian/tests/run-upstream-tests TESTS="16"
Depends: btrfs-progs,
         busybox,
         dracut-live,
         dracut-test,
         fdisk,
         kbd,
         linux-image-generic,
         make,
         mount,
         parted,
         qemu-efi-aarch64 [arm64],
         qemu-efi-arm [armhf],
         qemu-kvm,
         seabios [ppc64el],
         squashfs-tools,
         systemd-sysv,
         util-linux,
         zstd
Restrictions: allow-stderr
Features: test-name=upstream-dracut-live

Architecture: amd64
Test-Command: debian/tests/run-upstream-tests TESTS="20"
Depends: dracut-live,
         dracut-network,
         dracut-test,
         iproute2,
         isc-dhcp-client,
         isc-dhcp-server,
         linux-image-generic,
         make,
         mount,
         nfs-kernel-server,
         procps,
         qemu-efi-aarch64 [arm64],
         qemu-efi-arm [armhf],
         qemu-kvm,
         seabios [ppc64el],
         systemd,
         systemd-sysv,
         sysvinit-utils,
         util-linux,
         zstd
Restrictions: allow-stderr
Features: test-name=upstream-dracut-network-nfs

Architecture: amd64
Test-Command: debian/tests/run-upstream-tests TESTS="40"
Depends: cryptsetup,
         dracut-network,
         dracut-test,
         iproute2,
         isc-dhcp-client,
         isc-dhcp-server,
         linux-image-generic,
         lvm2,
         make,
         mdadm,
         mount,
         nbd-client,
         nbd-server,
         procps,
         qemu-efi-aarch64 [arm64],
         qemu-efi-arm [armhf],
         qemu-kvm,
         seabios [ppc64el],
         systemd,
         systemd-cryptsetup,
         systemd-sysv,
         util-linux,
         zstd
Restrictions: allow-stderr
Features: test-name=upstream-dracut-network-nbd
